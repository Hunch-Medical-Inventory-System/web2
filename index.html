<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JJs V2.0 - Medical Inventory</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-dark: #0a0a0f;
            --secondary-dark: #141420;
            --tertiary-dark: #1e1e2d;
            --card-dark: #252535;
            --accent-blue: #4a6cf7;
            --accent-purple: #8a2be2;
            --accent-gradient: linear-gradient(135deg, var(--accent-blue), var(--accent-purple));
            --accent-glow: 0 0 20px rgba(74, 108, 247, 0.3);
            --text-primary: #ffffff;
            --text-secondary: #b0b0c0;
            --text-muted: #8a8a9c;
            --border-color: #2d2d42;
            --success-color: #2ecc71;
            --warning-color: #f39c12;
            --danger-color: #ff4757;
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            --radius-sm: 8px;
            --radius-md: 12px;
            --radius-lg: 16px;
            --radius-xl: 24px;
            --shadow-sm: 0 2px 10px rgba(0, 0, 0, 0.3);
            --shadow-md: 0 5px 20px rgba(0, 0, 0, 0.4);
            --shadow-lg: 0 10px 30px rgba(0, 0, 0, 0.5);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', 'Segoe UI', system-ui, sans-serif;
        }

        body {
            background-color: var(--primary-dark);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--secondary-dark);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--accent-blue);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--accent-purple);
        }

        /* Login Page */
        .login-container {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background: var(--primary-dark);
            position: relative;
            overflow: hidden;
        }

        .login-container::before {
            content: '';
            position: absolute;
            width: 300%;
            height: 300%;
            background: radial-gradient(circle, rgba(74, 108, 247, 0.1) 0%, transparent 70%);
            animation: pulse 8s ease-in-out infinite alternate;
        }

        @keyframes pulse {
            0% { transform: translate(-50%, -50%) scale(1); }
            100% { transform: translate(-50%, -50%) scale(1.2); }
        }

        .login-box {
            background: var(--secondary-dark);
            border-radius: var(--radius-xl);
            padding: 48px;
            width: 100%;
            max-width: 440px;
            box-shadow: var(--shadow-lg);
            border: 1px solid var(--border-color);
            backdrop-filter: blur(10px);
            position: relative;
            z-index: 1;
            transform: translateY(0);
            transition: var(--transition);
        }

        .login-box:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.6), var(--accent-glow);
        }

        .login-logo {
            text-align: center;
            margin-bottom: 40px;
        }

        .login-logo h1 {
            font-size: 2.8rem;
            font-weight: 800;
            background: var(--accent-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 8px;
            letter-spacing: -0.5px;
        }

        .login-logo p {
            color: var(--text-secondary);
            font-size: 1rem;
            font-weight: 500;
        }

        .form-group {
            margin-bottom: 24px;
            position: relative;
        }

        .form-group label {
            display: block;
            margin-bottom: 12px;
            color: var(--text-primary);
            font-weight: 600;
            font-size: 0.95rem;
            letter-spacing: 0.5px;
        }

        .form-group input {
            width: 100%;
            padding: 16px 20px;
            background: var(--tertiary-dark);
            border: 2px solid var(--border-color);
            border-radius: var(--radius-md);
            font-size: 1rem;
            color: var(--text-primary);
            transition: var(--transition);
        }

        .form-group input:focus {
            border-color: var(--accent-blue);
            box-shadow: 0 0 0 3px rgba(74, 108, 247, 0.2);
            outline: none;
        }

        .form-group input::placeholder {
            color: var(--text-muted);
        }

        .login-btn {
            width: 100%;
            padding: 16px;
            background: var(--accent-gradient);
            color: white;
            border: none;
            border-radius: var(--radius-md);
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }

        .login-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: 0.5s;
        }

        .login-btn:hover::before {
            left: 100%;
        }

        .login-btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--accent-glow);
        }

        /* Main Application */
        .app-container {
            display: none;
            min-height: 100vh;
        }

        /* Header */
        .header {
            background: var(--secondary-dark);
            padding: 0 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: 70px;
            border-bottom: 1px solid var(--border-color);
            position: sticky;
            top: 0;
            z-index: 100;
            backdrop-filter: blur(10px);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .logo-icon {
            width: 40px;
            height: 40px;
            background: var(--accent-gradient);
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
        }

        .logo h1 {
            font-size: 1.6rem;
            font-weight: 700;
            background: var(--accent-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .logo span {
            color: var(--accent-purple);
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .user-avatar {
            width: 44px;
            height: 44px;
            border-radius: 50%;
            background: var(--accent-gradient);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 1.1rem;
        }

        .user-details h4 {
            font-size: 0.95rem;
            font-weight: 600;
        }

        .user-details p {
            color: var(--text-secondary);
            font-size: 0.85rem;
        }

        .mobile-menu-btn {
            display: none;
            background: none;
            border: none;
            color: var(--text-primary);
            font-size: 1.5rem;
            cursor: pointer;
            padding: 8px;
            border-radius: var(--radius-sm);
            transition: var(--transition);
        }

        .mobile-menu-btn:hover {
            background: var(--tertiary-dark);
        }

        /* Navigation */
        .nav-container {
            display: flex;
            min-height: calc(100vh - 70px);
        }

        .sidebar {
            width: 280px;
            background: var(--secondary-dark);
            padding: 30px 0;
            border-right: 1px solid var(--border-color);
            transition: var(--transition);
        }

        .nav-links {
            list-style: none;
        }

        .nav-links li {
            padding: 0 24px;
            margin-bottom: 8px;
        }

        .nav-links a {
            color: var(--text-secondary);
            text-decoration: none;
            display: flex;
            align-items: center;
            font-size: 0.95rem;
            font-weight: 500;
            padding: 16px 20px;
            border-radius: var(--radius-md);
            transition: var(--transition);
            gap: 16px;
        }

        .nav-links i {
            font-size: 1.2rem;
            width: 24px;
            text-align: center;
        }

        .nav-links li:hover a {
            background: var(--tertiary-dark);
            color: var(--text-primary);
            transform: translateX(4px);
        }

        .nav-links li.active a {
            background: var(--accent-gradient);
            color: white;
            box-shadow: var(--accent-glow);
        }

        .nav-links li.active i {
            transform: scale(1.1);
        }

        /* Main Content */
        .main-content {
            flex: 1;
            padding: 30px;
            background: var(--primary-dark);
            overflow-y: auto;
        }

        .page {
            display: none;
            animation: fadeIn 0.4s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .page.active {
            display: block;
        }

        .page-header {
            margin-bottom: 40px;
        }

        .page-header h2 {
            font-size: 2.2rem;
            font-weight: 700;
            margin-bottom: 12px;
            background: var(--accent-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .page-header p {
            color: var(--text-secondary);
            font-size: 1.05rem;
            max-width: 600px;
            line-height: 1.6;
        }

        /* Dashboard Cards */
        .dashboard-cards {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 24px;
            margin-bottom: 40px;
        }

        .card {
            background: var(--card-dark);
            border-radius: var(--radius-lg);
            padding: 28px;
            border: 1px solid var(--border-color);
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: var(--accent-gradient);
        }

        .card:hover {
            transform: translateY(-8px);
            box-shadow: var(--shadow-lg);
            border-color: var(--accent-blue);
        }

        .card-icon {
            width: 56px;
            height: 56px;
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 20px;
            font-size: 1.6rem;
            color: white;
            background: var(--accent-gradient);
            box-shadow: var(--accent-glow);
        }

        .card h3 {
            font-size: 2.2rem;
            font-weight: 700;
            margin-bottom: 8px;
            color: var(--text-primary);
        }

        .card p {
            color: var(--text-secondary);
            font-size: 0.95rem;
            font-weight: 500;
        }

        .card-trend {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-top: 12px;
            font-size: 0.9rem;
        }

        .card-trend.up {
            color: var(--success-color);
        }

        .card-trend.down {
            color: var(--danger-color);
        }

        /* Tables */
        .table-container {
            background: var(--card-dark);
            border-radius: var(--radius-lg);
            overflow: hidden;
            box-shadow: var(--shadow-md);
            border: 1px solid var(--border-color);
            overflow-x: auto;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            min-width: 800px;
        }

        th {
            background: var(--tertiary-dark);
            padding: 20px 24px;
            text-align: left;
            font-weight: 600;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: var(--text-secondary);
            border-bottom: 1px solid var(--border-color);
        }

        td {
            padding: 20px 24px;
            border-bottom: 1px solid var(--border-color);
            color: var(--text-primary);
            font-weight: 500;
        }

        tr:last-child td {
            border-bottom: none;
        }

        tr:hover td {
            background: rgba(74, 108, 247, 0.05);
        }

        .status {
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            gap: 6px;
        }

        .status::before {
            content: '';
            width: 8px;
            height: 8px;
            border-radius: 50%;
        }

        .status.expired {
            background: rgba(255, 71, 87, 0.1);
            color: var(--danger-color);
        }

        .status.expired::before {
            background: var(--danger-color);
        }

        .status.warning {
            background: rgba(243, 156, 18, 0.1);
            color: var(--warning-color);
        }

        .status.warning::before {
            background: var(--warning-color);
        }

        .status.ok {
            background: rgba(46, 204, 113, 0.1);
            color: var(--success-color);
        }

        .status.ok::before {
            background: var(--success-color);
        }

        /* NFC Scanner */
        .scanner-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 60px 40px;
            background: var(--card-dark);
            border-radius: var(--radius-xl);
            box-shadow: var(--shadow-lg);
            border: 2px dashed var(--border-color);
            text-align: center;
            position: relative;
            min-height: 500px;
            overflow: hidden;
        }

        .scanner-animation {
            width: 200px;
            height: 200px;
            border-radius: 50%;
            background: var(--accent-gradient);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 32px;
            animation: scannerPulse 2s ease-in-out infinite;
            position: relative;
        }

        @keyframes scannerPulse {
            0% { 
                box-shadow: 0 0 0 0 rgba(74, 108, 247, 0.4),
                          0 0 0 0 rgba(138, 43, 226, 0.4);
            }
            70% { 
                box-shadow: 0 0 0 30px rgba(74, 108, 247, 0),
                          0 0 0 60px rgba(138, 43, 226, 0);
            }
            100% { 
                box-shadow: 0 0 0 0 rgba(74, 108, 247, 0),
                          0 0 0 0 rgba(138, 43, 226, 0);
            }
        }

        .scanner-animation i {
            font-size: 4rem;
            color: white;
            z-index: 2;
        }

        .scanner-status {
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 16px;
            background: var(--accent-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .scanner-message {
            color: var(--text-secondary);
            font-size: 1.1rem;
            margin-bottom: 32px;
            max-width: 500px;
            line-height: 1.6;
        }

        .scanner-progress {
            width: 100%;
            max-width: 400px;
            height: 6px;
            background: var(--tertiary-dark);
            border-radius: 3px;
            margin: 32px 0;
            overflow: hidden;
            position: relative;
        }

        .scanner-progress-bar {
            height: 100%;
            background: var(--accent-gradient);
            width: 0%;
            transition: width 0.3s ease;
        }

        .scanner-btn {
            padding: 16px 40px;
            background: var(--accent-gradient);
            color: white;
            border: none;
            border-radius: var(--radius-md);
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 12px;
            position: relative;
            overflow: hidden;
        }

        .scanner-btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--accent-glow);
        }

        .scanner-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .scanner-btn.scanning {
            background: var(--danger-color);
            animation: scanningBtn 1s ease-in-out infinite alternate;
        }

        @keyframes scanningBtn {
            0% { opacity: 0.8; }
            100% { opacity: 1; }
        }

        .scanner-feedback {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-top: 24px;
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .scanner-feedback i {
            color: var(--accent-blue);
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(10, 10, 15, 0.9);
            backdrop-filter: blur(10px);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            padding: 20px;
            animation: modalFade 0.3s ease;
        }

        @keyframes modalFade {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: var(--card-dark);
            border-radius: var(--radius-xl);
            width: 100%;
            max-width: 500px;
            padding: 40px;
            box-shadow: var(--shadow-lg);
            border: 1px solid var(--border-color);
            transform: scale(0.9);
            animation: modalScale 0.3s ease forwards;
        }

        @keyframes modalScale {
            to { transform: scale(1); }
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 32px;
        }

        .modal-header h3 {
            font-size: 1.8rem;
            font-weight: 700;
            background: var(--accent-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .close-modal {
            background: none;
            border: none;
            font-size: 1.8rem;
            cursor: pointer;
            color: var(--text-secondary);
            transition: var(--transition);
            padding: 8px;
            border-radius: var(--radius-sm);
        }

        .close-modal:hover {
            color: var(--danger-color);
            background: rgba(255, 71, 87, 0.1);
        }

        /* AI Chat */
        .chat-container {
            display: flex;
            flex-direction: column;
            height: 600px;
            background: var(--card-dark);
            border-radius: var(--radius-xl);
            box-shadow: var(--shadow-lg);
            border: 1px solid var(--border-color);
            overflow: hidden;
        }

        .chat-header {
            padding: 24px 32px;
            background: var(--tertiary-dark);
            border-bottom: 1px solid var(--border-color);
        }

        .chat-header h3 {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 1.4rem;
            font-weight: 600;
        }

        .chat-header i {
            color: var(--accent-blue);
            font-size: 1.6rem;
        }

        .chat-messages {
            flex: 1;
            padding: 24px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .message {
            max-width: 70%;
            padding: 16px 20px;
            border-radius: var(--radius-md);
            line-height: 1.6;
            position: relative;
            animation: messageSlide 0.3s ease;
        }

        @keyframes messageSlide {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .message.bot {
            align-self: flex-start;
            background: var(--tertiary-dark);
            border-top-left-radius: 4px;
        }

        .message.user {
            align-self: flex-end;
            background: var(--accent-gradient);
            color: white;
            border-top-right-radius: 4px;
        }

        .chat-input {
            display: flex;
            padding: 20px 24px;
            border-top: 1px solid var(--border-color);
            gap: 12px;
        }

        .chat-input input {
            flex: 1;
            padding: 16px 20px;
            background: var(--tertiary-dark);
            border: 2px solid var(--border-color);
            border-radius: var(--radius-md);
            color: var(--text-primary);
            font-size: 1rem;
            transition: var(--transition);
        }

        .chat-input input:focus {
            border-color: var(--accent-blue);
            outline: none;
            box-shadow: 0 0 0 3px rgba(74, 108, 247, 0.2);
        }

        .chat-input button {
            padding: 16px 24px;
            background: var(--accent-gradient);
            color: white;
            border: none;
            border-radius: var(--radius-md);
            cursor: pointer;
            transition: var(--transition);
            font-weight: 600;
        }

        .chat-input button:hover {
            transform: translateY(-2px);
            box-shadow: var(--accent-glow);
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: var(--text-secondary);
        }

        .empty-state i {
            font-size: 4rem;
            margin-bottom: 24px;
            opacity: 0.5;
        }

        .empty-state h3 {
            font-size: 1.6rem;
            margin-bottom: 12px;
            color: var(--text-primary);
        }

        .empty-state p {
            max-width: 400px;
            margin: 0 auto;
            line-height: 1.6;
        }

        /* Action Buttons */
        .action-btn {
            padding: 10px 20px;
            background: var(--tertiary-dark);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-md);
            color: var(--text-primary);
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .action-btn:hover {
            background: var(--accent-gradient);
            border-color: transparent;
            transform: translateY(-2px);
        }

        /* Responsive Design */
        @media (max-width: 1200px) {
            .sidebar {
                width: 240px;
            }
        }

        @media (max-width: 992px) {
            .sidebar {
                position: fixed;
                top: 70px;
                left: 0;
                height: calc(100vh - 70px);
                transform: translateX(-100%);
                z-index: 99;
                width: 280px;
            }
            
            .sidebar.active {
                transform: translateX(0);
            }
            
            .mobile-menu-btn {
                display: block;
            }
            
            .dashboard-cards {
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            }
        }

        @media (max-width: 768px) {
            .main-content {
                padding: 20px;
            }
            
            .page-header h2 {
                font-size: 1.8rem;
            }
            
            .login-box {
                padding: 32px 24px;
            }
            
            .scanner-container {
                padding: 40px 20px;
                min-height: 400px;
            }
            
            .scanner-animation {
                width: 150px;
                height: 150px;
            }
            
            .chat-container {
                height: 500px;
            }
        }

        @media (max-width: 576px) {
            .header {
                padding: 0 20px;
            }
            
            .logo h1 {
                font-size: 1.4rem;
            }
            
            .dashboard-cards {
                grid-template-columns: 1fr;
            }
            
            .card {
                padding: 24px;
            }
            
            .modal-content {
                padding: 24px;
            }
        }

        /* Loading Animation */
        .loader {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: var(--accent-blue);
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Badges */
        .badge {
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            gap: 4px;
        }

        .badge.success {
            background: rgba(46, 204, 113, 0.1);
            color: var(--success-color);
        }

        .badge.warning {
            background: rgba(243, 156, 18, 0.1);
            color: var(--warning-color);
        }

        .badge.danger {
            background: rgba(255, 71, 87, 0.1);
            color: var(--danger-color);
        }

        /* Tooltip */
        [data-tooltip] {
            position: relative;
        }

        [data-tooltip]:hover::after {
            content: attr(data-tooltip);
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: var(--tertiary-dark);
            color: var(--text-primary);
            padding: 8px 12px;
            border-radius: var(--radius-sm);
            font-size: 0.85rem;
            white-space: nowrap;
            z-index: 1000;
            border: 1px solid var(--border-color);
        }
    </style>
</head>
<body>
    <!-- Login Page -->
    <div id="login-page" class="login-container">
        <div class="login-box">
            <div class="login-logo">
                <h1>JJs 2.0</h1>
                <p>Medical Inventory Intelligence Platform</p>
            </div>
            <form id="login-form">
                <div class="form-group">
                    <label for="username">Username</label>
                    <input type="text" id="username" placeholder="Enter your username" required>
                </div>
                <div class="form-group">
                    <label for="password">Password</label>
                    <input type="password" id="password" placeholder="Enter your password" required>
                </div>
                <button type="submit" class="login-btn">
                    <i class="fas fa-sign-in-alt"></i> Login to Dashboard
                </button>
            </form>
        </div>
    </div>

    <!-- Main Application -->
    <div id="app" class="app-container">
        <!-- Header -->
        <div class="header">
            <div class="logo">
                <div class="logo-icon">
                    <i class="fas fa-capsules"></i>
                </div>
                <h1>JJs <span>V2.0</span></h1>
            </div>
            <button class="mobile-menu-btn" id="mobile-menu-toggle">
                <i class="fas fa-bars"></i>
            </button>
            <div class="user-info">
                <div class="user-avatar" id="user-avatar">D</div>
                <div class="user-details">
                    <h4>DEMO USER</h4>
                    <p>Medical Administrator</p>
                </div>
            </div>
        </div>

        <!-- Navigation and Content -->
        <div class="nav-container">
            <!-- Sidebar Navigation -->
            <div class="sidebar" id="sidebar">
                <ul class="nav-links">
                    <li class="active" data-page="home">
                        <a href="#">
                            <i class="fas fa-home"></i> <span>Dashboard</span>
                        </a>
                    </li>
                    <li data-page="locker">
                        <a href="#">
                            <i class="fas fa-cube"></i> <span>Inventory</span>
                            <span class="badge success" style="margin-left: auto;" id="inventory-badge">12</span>
                        </a>
                    </li>
                    <li data-page="logs">
                        <a href="#">
                            <i class="fas fa-history"></i> <span>Activity Logs</span>
                            <span class="badge warning" style="margin-left: auto;" id="logs-badge">10</span>
                        </a>
                    </li>
                    <li data-page="expired">
                        <a href="#">
                            <i class="fas fa-exclamation-triangle"></i> <span>Alerts</span>
                            <span class="badge danger" style="margin-left: auto;" id="alerts-badge">3</span>
                        </a>
                    </li>
                    <li data-page="scanner">
                        <a href="#">
                            <i class="fas fa-qrcode"></i> <span>NFC Scanner</span>
                        </a>
                    </li>
                    <li data-page="ai-chat">
                        <a href="#">
                            <i class="fas fa-robot"></i> <span>AI Assistant</span>
                        </a>
                    </li>
                    <li id="logout-btn">
                        <a href="#">
                            <i class="fas fa-sign-out-alt"></i> <span>Logout</span>
                        </a>
                    </li>
                </ul>
            </div>

            <!-- Main Content Area -->
            <div class="main-content">
                <!-- Home Page -->
                <div id="home" class="page active">
                    <div class="page-header">
                        <h2>Dashboard Overview</h2>
                        <p>Welcome back! Here's what's happening with your medical inventory today.</p>
                    </div>
                    <div class="dashboard-cards">
                        <div class="card">
                            <div class="card-icon">
                                <i class="fas fa-capsules"></i>
                            </div>
                            <h3 id="total-items">12</h3>
                            <p>Total Inventory Items</p>
                            <div class="card-trend up">
                                <i class="fas fa-arrow-up"></i> 2 added this week
                            </div>
                        </div>
                        <div class="card">
                            <div class="card-icon">
                                <i class="fas fa-clock"></i>
                            </div>
                            <h3 id="expiring-items">3</h3>
                            <p>Expiring Soon</p>
                            <div class="card-trend warning">
                                <i class="fas fa-exclamation-circle"></i> Requires attention
                            </div>
                        </div>
                        <div class="card">
                            <div class="card-icon">
                                <i class="fas fa-clipboard-list"></i>
                            </div>
                            <h3 id="recent-activities">10</h3>
                            <p>Recent Activities</p>
                            <div class="card-trend up">
                                <i class="fas fa-arrow-up"></i> 4 today
                            </div>
                        </div>
                        <div class="card">
                            <div class="card-icon">
                                <i class="fas fa-check-circle"></i>
                            </div>
                            <h3>92%</h3>
                            <p>Inventory Accuracy</p>
                            <div class="card-trend up">
                                <i class="fas fa-arrow-up"></i> 2% increase
                            </div>
                        </div>
                    </div>
                    <div class="page-header">
                        <h2>Recent Activity</h2>
                        <p>Latest actions and updates in your inventory system</p>
                    </div>
                    <div class="table-container">
                        <table id="recent-activity-table">
                            <thead>
                                <tr>
                                    <th>Item</th>
                                    <th>Action</th>
                                    <th>User</th>
                                    <th>Date & Time</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Will be populated dynamically -->
                            </tbody>
                        </table>
                        <div class="empty-state" id="recent-activity-empty">
                            <i class="fas fa-clipboard-list"></i>
                            <h3>No Recent Activity</h3>
                            <p>Activity will appear here as you use the system</p>
                        </div>
                    </div>
                </div>

                <!-- Inventory Page -->
                <div id="locker" class="page">
                    <div class="page-header">
                        <h2>Inventory Management</h2>
                        <p>All medical supplies currently in stock and their status</p>
                    </div>
                    <div class="table-container">
                        <table id="locker-table">
                            <thead>
                                <tr>
                                    <th>Item ID</th>
                                    <th>Name</th>
                                    <th>Category</th>
                                    <th>Quantity</th>
                                    <th>Expiry Date</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Will be populated dynamically -->
                            </tbody>
                        </table>
                        <div class="empty-state" id="locker-empty">
                            <i class="fas fa-cube"></i>
                            <h3>No Items in Inventory</h3>
                            <p>Add items to your inventory to get started</p>
                        </div>
                    </div>
                </div>

                <!-- Logs Page -->
                <div id="logs" class="page">
                    <div class="page-header">
                        <h2>System Logs</h2>
                        <p>Complete history of all inventory activities and system events</p>
                    </div>
                    <div class="table-container">
                        <table id="logs-table">
                            <thead>
                                <tr>
                                    <th>Timestamp</th>
                                    <th>User</th>
                                    <th>Action</th>
                                    <th>Item</th>
                                    <th>Details</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Will be populated dynamically -->
                            </tbody>
                        </table>
                        <div class="empty-state" id="logs-empty">
                            <i class="fas fa-history"></i>
                            <h3>No Logs Available</h3>
                            <p>Logs will appear here as you use the system</p>
                        </div>
                    </div>
                </div>

                <!-- Alerts Page -->
                <div id="expired" class="page">
                    <div class="page-header">
                        <h2>System Alerts</h2>
                        <p>Items requiring immediate attention and critical notifications</p>
                    </div>
                    <div class="table-container">
                        <table id="warnings-table">
                            <thead>
                                <tr>
                                    <th>Priority</th>
                                    <th>Item ID</th>
                                    <th>Name</th>
                                    <th>Quantity</th>
                                    <th>Expiry Date</th>
                                    <th>Status</th>
                                    <th>Action Required</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Will be populated dynamically -->
                            </tbody>
                        </table>
                        <div class="empty-state" id="warnings-empty">
                            <i class="fas fa-check-circle"></i>
                            <h3>No Active Alerts</h3>
                            <p>All items are properly stocked and within expiry dates</p>
                        </div>
                    </div>
                </div>

                <!-- NFC Scanner Page -->
                <div id="scanner" class="page">
                    <div class="page-header">
                        <h2>NFC Scanner</h2>
                        <p>Scan medicine NFC tags to check out items in real-time</p>
                    </div>
                    <div class="scanner-container">
                        <div class="scanner-animation">
                            <i class="fas fa-qrcode"></i>
                        </div>
                        <h3 class="scanner-status" id="scanner-status">Ready to Scan</h3>
                        <p class="scanner-message" id="scanner-message">
                            Place the medicine NFC tag near your device to automatically identify and check out items
                        </p>
                        
                        <div class="scanner-progress" id="scanner-progress" style="display: none;">
                            <div class="scanner-progress-bar" id="scanner-progress-bar"></div>
                        </div>
                        
                        <div class="scanner-feedback" id="scanner-feedback">
                            <i class="fas fa-info-circle"></i>
                            <span>Scanner will automatically detect compatible NFC tags</span>
                        </div>
                        
                        <button class="scanner-btn" id="start-scan">
                            <i class="fas fa-play"></i> Start Scanning
                        </button>
                        
                        <div class="scanner-feedback" style="margin-top: 32px;">
                            <i class="fas fa-microchip"></i>
                            <span>Last scan: <span id="last-scan-time">Never</span></span>
                            <span style="margin-left: 16px;">
                                <i class="fas fa-database"></i>
                                <span>Scans today: <span id="scans-today">0</span></span>
                            </span>
                        </div>
                    </div>
                    
                    <!-- Demo Items -->
                    <div style="margin-top: 40px;">
                        <div class="page-header">
                            <h3>Demo NFC Tags</h3>
                            <p>Simulate scanning these demo medications for testing</p>
                        </div>
                        <div style="display: flex; gap: 16px; flex-wrap: wrap;">
                            <button class="action-btn demo-scan" data-med="Aspirin 100mg">
                                <i class="fas fa-capsule"></i> Aspirin 100mg
                            </button>
                            <button class="action-btn demo-scan" data-med="Amoxicillin 500mg">
                                <i class="fas fa-prescription-bottle"></i> Amoxicillin 500mg
                            </button>
                            <button class="action-btn demo-scan" data-med="Insulin Glargine">
                                <i class="fas fa-syringe"></i> Insulin Glargine
                            </button>
                            <button class="action-btn demo-scan" data-med="Unknown Medication">
                                <i class="fas fa-question-circle"></i> Unknown Medication
                            </button>
                        </div>
                    </div>
                </div>

                <!-- AI Chat Page -->
                <div id="ai-chat" class="page">
                    <div class="page-header">
                        <h2>AI Assistant</h2>
                        <p>Get intelligent help with inventory management and medical queries</p>
                    </div>
                    <div class="chat-container">
                        <div class="chat-header">
                            <h3><i class="fas fa-robot"></i> JJs AI Assistant</h3>
                        </div>
                        <div class="chat-messages" id="chat-messages">
                            <div class="message bot">
                                Hello! I'm your JJs AI assistant. I can help you with:
                                • Checking inventory levels
                                • Managing expiring items
                                • Using the NFC scanner
                                • Analyzing usage patterns
                                • Generating reports
                                How can I assist you today?
                            </div>
                        </div>
                        <div class="chat-input">
                            <input type="text" id="user-input" placeholder="Ask me anything about your inventory...">
                            <button id="send-message">
                                <i class="fas fa-paper-plane"></i> Send
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal for NFC Scan -->
    <div id="nfc-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Check Out Medication</h3>
                <button class="close-modal">&times;</button>
            </div>
            <div class="form-group">
                <label for="medication-name">Medication</label>
                <input type="text" id="medication-name" readonly style="background: var(--tertiary-dark);">
            </div>
            <div class="form-group">
                <label for="quantity">Quantity to Check Out</label>
                <input type="number" id="quantity" min="1" value="1" style="background: var(--tertiary-dark);">
            </div>
            <div class="form-group">
                <label for="purpose">Purpose / Notes</label>
                <input type="text" id="purpose" placeholder="Enter purpose for this medication" style="background: var(--tertiary-dark);">
            </div>
            <div class="form-group">
                <label for="patient-id">Patient ID (Optional)</label>
                <input type="text" id="patient-id" placeholder="Enter patient identifier" style="background: var(--tertiary-dark);">
            </div>
            <button class="scanner-btn" id="confirm-checkout" style="width: 100%; margin-top: 24px;">
                <i class="fas fa-check-circle"></i> Confirm Check Out
            </button>
        </div>
    </div>

    <script>
        // DOM Elements
        const loginPage = document.getElementById('login-page');
        const app = document.getElementById('app');
        const loginForm = document.getElementById('login-form');
        const mobileMenuToggle = document.getElementById('mobile-menu-toggle');
        const sidebar = document.getElementById('sidebar');
        const navLinks = document.querySelectorAll('.nav-links li');
        const pages = document.querySelectorAll('.page');
        const logoutBtn = document.getElementById('logout-btn');
        
        // NFC Scanner Elements
        const startScanBtn = document.getElementById('start-scan');
        const scannerStatus = document.getElementById('scanner-status');
        const scannerMessage = document.getElementById('scanner-message');
        const scannerProgress = document.getElementById('scanner-progress');
        const scannerProgressBar = document.getElementById('scanner-progress-bar');
        const scannerFeedback = document.getElementById('scanner-feedback');
        const nfcModal = document.getElementById('nfc-modal');
        const closeModal = document.querySelector('.close-modal');
        const confirmCheckout = document.getElementById('confirm-checkout');
        const lastScanTime = document.getElementById('last-scan-time');
        const scansToday = document.getElementById('scans-today');
        
        // AI Chat Elements
        const chatMessages = document.getElementById('chat-messages');
        const userInput = document.getElementById('user-input');
        const sendMessageBtn = document.getElementById('send-message');
        
        // Demo scan buttons
        const demoScanBtns = document.querySelectorAll('.demo-scan');
        
        // Data Storage
        let inventory = JSON.parse(localStorage.getItem('inventory')) || [];
        let logs = JSON.parse(localStorage.getItem('logs')) || [];
        let currentUser = JSON.parse(localStorage.getItem('currentUser')) || null;
        let nfcReader = null;
        let currentScannedItem = null;
        let scanSessionActive = false;
        let scanCountToday = parseInt(localStorage.getItem('scanCountToday') || '0');
        let lastScanTimestamp = localStorage.getItem('lastScanTimestamp');

        // Update scan stats
        function updateScanStats() {
            scansToday.textContent = scanCountToday;
            if (lastScanTimestamp) {
                const date = new Date(lastScanTimestamp);
                lastScanTime.textContent = date.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
            }
        }

        // ===== FAKE DATA INITIALIZATION =====
        if (inventory.length === 0) {
            const today = new Date();
            const nextMonth = new Date(today);
            nextMonth.setMonth(nextMonth.getMonth() + 1);
            const nextThreeMonths = new Date(today);
            nextThreeMonths.setMonth(nextThreeMonths.getMonth() + 3);
            const nextYear = new Date(today);
            nextYear.setFullYear(nextYear.getFullYear() + 1);
            const expiredDate = new Date(today);
            expiredDate.setMonth(expiredDate.getMonth() - 2);
            const warningDate = new Date(today);
            warningDate.setDate(warningDate.getDate() + 15);
            
            inventory = [
                {
                    id: "MED-001",
                    name: "Aspirin 100mg",
                    location: "Section A-1",
                    category: "Pain Relief",
                    quantity: 150,
                    expiryDate: formatDate(nextYear)
                },
                {
                    id: "MED-002",
                    name: "Amoxicillin 500mg",
                    location: "Section B-3",
                    category: "Antibiotic",
                    quantity: 80,
                    expiryDate: formatDate(nextMonth)
                },
                {
                    id: "MED-003",
                    name: "Insulin Glargine",
                    location: "Refrigerator-1",
                    category: "Diabetes",
                    quantity: 25,
                    expiryDate: formatDate(nextThreeMonths)
                },
                {
                    id: "MED-004",
                    name: "Lisinopril 10mg",
                    location: "Section C-2",
                    category: "Blood Pressure",
                    quantity: 120,
                    expiryDate: formatDate(nextYear)
                },
                {
                    id: "MED-005",
                    name: "Albuterol Inhaler",
                    location: "Section A-4",
                    category: "Respiratory",
                    quantity: 35,
                    expiryDate: formatDate(warningDate)
                },
                {
                    id: "MED-006",
                    name: "Atorvastatin 20mg",
                    location: "Section B-1",
                    category: "Cholesterol",
                    quantity: 200,
                    expiryDate: formatDate(nextYear)
                },
                {
                    id: "MED-007",
                    name: "Metformin 850mg",
                    location: "Section C-3",
                    category: "Diabetes",
                    quantity: 180,
                    expiryDate: formatDate(nextThreeMonths)
                },
                {
                    id: "MED-008",
                    name: "Ibuprofen 400mg",
                    location: "Section A-2",
                    category: "Pain Relief",
                    quantity: 300,
                    expiryDate: formatDate(nextYear)
                },
                {
                    id: "MED-009",
                    name: "Warfarin 5mg",
                    location: "Section D-1",
                    category: "Anticoagulant",
                    quantity: 90,
                    expiryDate: formatDate(expiredDate)
                },
                {
                    id: "MED-010",
                    name: "Levothyroxine 50mcg",
                    location: "Section B-4",
                    category: "Thyroid",
                    quantity: 150,
                    expiryDate: formatDate(nextYear)
                },
                {
                    id: "MED-011",
                    name: "Hydrochlorothiazide 25mg",
                    location: "Section C-1",
                    category: "Blood Pressure",
                    quantity: 110,
                    expiryDate: formatDate(nextMonth)
                },
                {
                    id: "MED-012",
                    name: "Omeprazole 20mg",
                    location: "Section A-3",
                    category: "Gastrointestinal",
                    quantity: 200,
                    expiryDate: formatDate(nextYear)
                }
            ];
            localStorage.setItem('inventory', JSON.stringify(inventory));
        }

        if (logs.length === 0) {
            const today = new Date();
            const yesterday = new Date(today);
            yesterday.setDate(yesterday.getDate() - 1);
            const twoDaysAgo = new Date(today);
            twoDaysAgo.setDate(twoDaysAgo.getDate() - 2);
            const threeDaysAgo = new Date(today);
            threeDaysAgo.setDate(threeDaysAgo.getDate() - 3);
            
            logs = [
                {
                    timestamp: formatDateTime(threeDaysAgo, 9, 30),
                    user: "Dr. Johnson",
                    action: "Check Out",
                    item: "Amoxicillin 500mg",
                    details: "Quantity: 20, Patient: John Smith",
                    status: "completed"
                },
                {
                    timestamp: formatDateTime(threeDaysAgo, 11, 45),
                    user: "Nurse Davis",
                    action: "Check Out",
                    item: "Aspirin 100mg",
                    details: "Quantity: 50, Emergency Stock",
                    status: "completed"
                },
                {
                    timestamp: formatDateTime(twoDaysAgo, 8, 15),
                    user: "Admin",
                    action: "Add",
                    item: "Insulin Glargine",
                    details: "New shipment received, Quantity: 25",
                    status: "completed"
                },
                {
                    timestamp: formatDateTime(twoDaysAgo, 14, 20),
                    user: "Dr. Johnson",
                    action: "Check Out",
                    item: "Lisinopril 10mg",
                    details: "Quantity: 30, Patient: Mary Johnson",
                    status: "completed"
                },
                {
                    timestamp: formatDateTime(twoDaysAgo, 16, 45),
                    user: "Nurse Davis",
                    action: "Dispose",
                    item: "Expired Antibiotics",
                    details: "Batch #XK-2022 disposed, Safety Protocol",
                    status: "completed"
                },
                {
                    timestamp: formatDateTime(yesterday, 9, 0),
                    user: "Admin",
                    action: "Add",
                    item: "Atorvastatin 20mg",
                    details: "New shipment received, Quantity: 200",
                    status: "completed"
                },
                {
                    timestamp: formatDateTime(yesterday, 11, 15),
                    user: "Dr. Miller",
                    action: "Check Out",
                    item: "Albuterol Inhaler",
                    details: "Quantity: 5, Emergency Room",
                    status: "completed"
                },
                {
                    timestamp: formatDateTime(yesterday, 14, 0),
                    user: "System",
                    action: "Warning",
                    item: "Warfarin 5mg",
                    details: "Item expiring in 30 days",
                    status: "warning"
                },
                {
                    timestamp: formatDateTime(today, 8, 30),
                    user: "Nurse Wilson",
                    action: "Check Out",
                    item: "Metformin 850mg",
                    details: "Quantity: 15, Patient: Robert Brown",
                    status: "completed"
                },
                {
                    timestamp: formatDateTime(today, 10, 45),
                    user: "Admin",
                    action: "Add",
                    item: "Hydrochlorothiazide 25mg",
                    details: "Restocked, Quantity: 110",
                    status: "completed"
                }
            ];
            localStorage.setItem('logs', JSON.stringify(logs));
        }

        // Helper function to format dates as YYYY-MM-DD
        function formatDate(date) {
            return date.toISOString().split('T')[0];
        }

        // Helper function to format date and time
        function formatDateTime(date, hours, minutes) {
            const newDate = new Date(date);
            newDate.setHours(hours, minutes, 0, 0);
            return `${newDate.toLocaleDateString()} ${newDate.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}`;
        }
        // ===== END FAKE DATA INITIALIZATION =====

        // Initialize the application
        function initApp() {
            // Check if user is already logged in
            if (currentUser) {
                showApp();
            }
            
            // Update dashboard counts
            updateDashboard();
            updateScanStats();
            
            // Initialize NFC Scanner if available
            initNFCScanner();
        }

        // Login Functionality
        loginForm.addEventListener('submit', function(e) {
            e.preventDefault();
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            
            if (username && password) {
                currentUser = {
                    username: username,
                    role: 'Medical Administrator'
                };
                localStorage.setItem('currentUser', JSON.stringify(currentUser));
                
                // Update avatar
                document.getElementById('user-avatar').textContent = username.charAt(0).toUpperCase();
                document.querySelector('.user-details h4').textContent = username.toUpperCase();
                
                // Add login log
                addLog('System', 'Login', `${username} logged into the system`);
                
                showApp();
            }
        });

        // Show main application
        function showApp() {
            loginPage.style.display = 'none';
            app.style.display = 'block';
            updateDashboard();
        }

        // Logout Functionality
        logoutBtn.addEventListener('click', function() {
            // Add logout log
            addLog('System', 'Logout', `${currentUser.username} logged out`);
            
            currentUser = null;
            localStorage.removeItem('currentUser');
            
            app.style.display = 'none';
            loginPage.style.display = 'flex';
            document.getElementById('username').value = '';
            document.getElementById('password').value = '';
        });

        // Mobile Menu Toggle
        mobileMenuToggle.addEventListener('click', function() {
            sidebar.classList.toggle('active');
        });

        // Navigation
        navLinks.forEach(link => {
            if (link.id !== 'logout-btn') {
                link.addEventListener('click', function() {
                    const pageId = this.getAttribute('data-page');
                    
                    // Update active nav link
                    navLinks.forEach(item => item.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Show selected page
                    pages.forEach(page => page.classList.remove('active'));
                    document.getElementById(pageId).classList.add('active');
                    
                    // Close mobile menu
                    sidebar.classList.remove('active');
                });
            }
        });

        // Update Dashboard
        function updateDashboard() {
            // Update card counts
            document.getElementById('total-items').textContent = inventory.length;
            
            const expiringItems = inventory.filter(item => {
                const expiryDate = new Date(item.expiryDate);
                const today = new Date();
                const daysUntilExpiry = Math.ceil((expiryDate - today) / (1000 * 60 * 60 * 24));
                return daysUntilExpiry <= 30 && daysUntilExpiry > 0;
            }).length;
            
            document.getElementById('expiring-items').textContent = expiringItems;
            document.getElementById('recent-activities').textContent = logs.length;
            
            // Update badges
            document.getElementById('inventory-badge').textContent = inventory.length;
            document.getElementById('logs-badge').textContent = logs.length;
            document.getElementById('alerts-badge').textContent = expiringItems;
            
            // Update recent activity table
            updateRecentActivityTable();
            
            // Update locker table
            updateLockerTable();
            
            // Update logs table
            updateLogsTable();
            
            // Update warnings table
            updateWarningsTable();
        }

        // Update Recent Activity Table
        function updateRecentActivityTable() {
            const tableBody = document.querySelector('#recent-activity-table tbody');
            const emptyState = document.getElementById('recent-activity-empty');
            
            tableBody.innerHTML = '';
            
            if (logs.length === 0) {
                emptyState.style.display = 'block';
                return;
            }
            
            emptyState.style.display = 'none';
            
            // Show only the 5 most recent logs
            const recentLogs = logs.slice(-5).reverse();
            
            recentLogs.forEach(log => {
                const row = document.createElement('tr');
                const statusBadge = log.status === 'warning' ? 
                    '<span class="badge warning">Warning</span>' : 
                    '<span class="badge success">Completed</span>';
                
                row.innerHTML = `
                    <td>${log.item || 'System'}</td>
                    <td>${log.action}</td>
                    <td>${log.user}</td>
                    <td>${log.timestamp}</td>
                    <td>${statusBadge}</td>
                `;
                tableBody.appendChild(row);
            });
        }

        // Update Locker Table
        function updateLockerTable() {
            const tableBody = document.querySelector('#locker-table tbody');
            const emptyState = document.getElementById('locker-empty');
            
            tableBody.innerHTML = '';
            
            if (inventory.length === 0) {
                emptyState.style.display = 'block';
                return;
            }
            
            emptyState.style.display = 'none';
            
            inventory.forEach(item => {
                const row = document.createElement('tr');
                const status = getItemStatus(item);
                
                row.innerHTML = `
                    <td><strong>${item.id}</strong></td>
                    <td>${item.name}</td>
                    <td>${item.category}</td>
                    <td><strong>${item.quantity}</strong> units</td>
                    <td>${item.expiryDate}</td>
                    <td><span class="status ${status.class}">${status.text}</span></td>
                    <td>
                        <button class="action-btn use-item" data-item-id="${item.id}">
                            <i class="fas fa-cart-arrow-down"></i> Use
                        </button>
                    </td>
                `;
                tableBody.appendChild(row);
            });
            
            // Add event listeners to use buttons
            document.querySelectorAll('.use-item').forEach(button => {
                button.addEventListener('click', function() {
                    const itemId = this.getAttribute('data-item-id');
                    const item = inventory.find(i => i.id === itemId);
                    if (item) {
                        simulateNFCScan(item.name);
                    }
                });
            });
        }

        // Update Logs Table
        function updateLogsTable() {
            const tableBody = document.querySelector('#logs-table tbody');
            const emptyState = document.getElementById('logs-empty');
            
            tableBody.innerHTML = '';
            
            if (logs.length === 0) {
                emptyState.style.display = 'block';
                return;
            }
            
            emptyState.style.display = 'none';
            
            logs.forEach(log => {
                const row = document.createElement('tr');
                const statusBadge = log.status === 'warning' ? 
                    '<span class="badge warning">Warning</span>' : 
                    '<span class="badge success">Completed</span>';
                
                row.innerHTML = `
                    <td>${log.timestamp}</td>
                    <td><strong>${log.user}</strong></td>
                    <td>${log.action}</td>
                    <td>${log.item || 'System'}</td>
                    <td>${log.details}</td>
                    <td>${statusBadge}</td>
                `;
                tableBody.appendChild(row);
            });
        }

        // Update Warnings Table
        function updateWarningsTable() {
            const tableBody = document.querySelector('#warnings-table tbody');
            const emptyState = document.getElementById('warnings-empty');
            
            tableBody.innerHTML = '';
            
            const warningItems = inventory.filter(item => {
                const status = getItemStatus(item);
                return status.class !== 'ok';
            });
            
            if (warningItems.length === 0) {
                emptyState.style.display = 'block';
                return;
            }
            
            emptyState.style.display = 'none';
            
            warningItems.forEach(item => {
                const status = getItemStatus(item);
                const priority = status.class === 'expired' ? 
                    '<span class="badge danger">HIGH</span>' : 
                    '<span class="badge warning">MEDIUM</span>';
                
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${priority}</td>
                    <td><strong>${item.id}</strong></td>
                    <td>${item.name}</td>
                    <td><strong>${item.quantity}</strong> units</td>
                    <td>${item.expiryDate}</td>
                    <td><span class="status ${status.class}">${status.text}</span></td>
                    <td>
                        <button class="action-btn" data-item-id="${item.id}">
                            ${status.class === 'expired' ? '<i class="fas fa-trash"></i> Dispose' : '<i class="fas fa-arrow-right"></i> Use First'}
                        </button>
                    </td>
                `;
                tableBody.appendChild(row);
            });
            
            // Add event listeners to action buttons
            document.querySelectorAll('#warnings-table .action-btn').forEach(button => {
                button.addEventListener('click', function() {
                    const itemId = this.getAttribute('data-item-id');
                    const item = inventory.find(i => i.id === itemId);
                    
                    if (item) {
                        if (getItemStatus(item).class === 'expired') {
                            disposeItem(item);
                        } else {
                            useItem(item);
                        }
                    }
                });
            });
        }

        // Get Item Status
        function getItemStatus(item) {
            const expiryDate = new Date(item.expiryDate);
            const today = new Date();
            const daysUntilExpiry = Math.ceil((expiryDate - today) / (1000 * 60 * 60 * 24));
            
            if (daysUntilExpiry < 0) {
                return { class: 'expired', text: 'EXPIRED' };
            } else if (daysUntilExpiry <= 7) {
                return { class: 'warning', text: 'CRITICAL' };
            } else if (daysUntilExpiry <= 30) {
                return { class: 'warning', text: 'WARNING' };
            } else {
                return { class: 'ok', text: 'OK' };
            }
        }

        // Add Log Entry
        function addLog(user, action, details, item = null, status = 'completed') {
            const now = new Date();
            const timestamp = `${now.toLocaleDateString()} ${now.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}`;
            
            logs.push({
                timestamp,
                user,
                action,
                item,
                details,
                status
            });
            
            localStorage.setItem('logs', JSON.stringify(logs));
            updateDashboard();
        }

        // Use Item (Check Out)
        function useItem(item, quantity = 1) {
            const itemIndex = inventory.findIndex(i => i.id === item.id);
            
            if (itemIndex !== -1) {
                if (inventory[itemIndex].quantity >= quantity) {
                    inventory[itemIndex].quantity -= quantity;
                    
                    // If quantity is 0, remove the item
                    if (inventory[itemIndex].quantity === 0) {
                        inventory.splice(itemIndex, 1);
                    }
                    
                    localStorage.setItem('inventory', JSON.stringify(inventory));
                    addLog(currentUser.username, 'Check Out', `Quantity: ${quantity}`, item.name);
                    updateDashboard();
                    
                    showNotification(`Successfully checked out ${quantity} of ${item.name}`, 'success');
                } else {
                    showNotification(`Not enough quantity available. Only ${inventory[itemIndex].quantity} left.`, 'warning');
                }
            }
        }

        // Dispose Item
        function disposeItem(item) {
            if (confirm(`Are you sure you want to dispose of ${item.name}? This action cannot be undone.`)) {
                const itemIndex = inventory.findIndex(i => i.id === item.id);
                
                if (itemIndex !== -1) {
                    inventory.splice(itemIndex, 1);
                    localStorage.setItem('inventory', JSON.stringify(inventory));
                    addLog(currentUser.username, 'Dispose', 'Item disposed due to expiry', item.name);
                    updateDashboard();
                    
                    showNotification(`Successfully disposed of ${item.name}`, 'success');
                }
            }
        }

        // Initialize NFC Scanner
        function initNFCScanner() {
            // Enable scanner button
            startScanBtn.disabled = false;
            startScanBtn.innerHTML = '<i class="fas fa-play"></i> Start Scanning';
            scannerStatus.textContent = 'Ready to Scan';
            scannerMessage.textContent = 'Place the medicine NFC tag near your device to automatically identify and check out items';
            
            // Check if NFC is supported
            if ('NDEFReader' in window) {
                nfcReader = new NDEFReader();
                
                startScanBtn.addEventListener('click', async () => {
                    if (!scanSessionActive) {
                        await startScanSession();
                    } else {
                        stopScanSession();
                    }
                });
            } else {
                scannerFeedback.innerHTML = '<i class="fas fa-exclamation-triangle"></i> <span>NFC not supported in this browser. Using demo mode.</span>';
            }
            
            // Demo scan buttons
            demoScanBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    const medName = this.getAttribute('data-med');
                    simulateNFCScan(medName);
                });
            });
        }

        // Start Scan Session
        async function startScanSession() {
            scanSessionActive = true;
            startScanBtn.innerHTML = '<i class="fas fa-stop"></i> Stop Scanning';
            startScanBtn.classList.add('scanning');
            scannerStatus.textContent = 'Scanning...';
            scannerMessage.textContent = 'Move NFC tag closer to your device';
            scannerProgress.style.display = 'block';
            scannerFeedback.innerHTML = '<i class="fas fa-search"></i> <span>Searching for NFC tags...</span>';
            
            // Simulate scanning progress
            let progress = 0;
            const progressInterval = setInterval(() => {
                if (progress < 100) {
                    progress += 10;
                    scannerProgressBar.style.width = progress + '%';
                }
            }, 300);
            
            // Simulate finding a tag after 3 seconds
            setTimeout(() => {
                if (scanSessionActive) {
                    clearInterval(progressInterval);
                    scannerProgressBar.style.width = '100%';
                    
                    // Simulate finding a random medication
                    const medications = inventory.map(item => item.name);
                    if (medications.length > 0) {
                        const randomMed = medications[Math.floor(Math.random() * medications.length)];
                        setTimeout(() => {
                            simulateNFCScan(randomMed);
                            stopScanSession();
                        }, 500);
                    } else {
                        stopScanSession();
                        showNotification('No medications found in inventory', 'warning');
                    }
                }
            }, 3000);
        }

        // Stop Scan Session
        function stopScanSession() {
            scanSessionActive = false;
            startScanBtn.innerHTML = '<i class="fas fa-play"></i> Start Scanning';
            startScanBtn.classList.remove('scanning');
            scannerStatus.textContent = 'Ready to Scan';
            scannerMessage.textContent = 'Place the medicine NFC tag near your device to automatically identify and check out items';
            scannerProgress.style.display = 'none';
            scannerProgressBar.style.width = '0%';
            scannerFeedback.innerHTML = '<i class="fas fa-info-circle"></i> <span>Scanner will automatically detect compatible NFC tags</span>';
        }

        // Simulate NFC Scan (for demo purposes)
        function simulateNFCScan(medicationName) {
            // Update scan stats
            scanCountToday++;
            localStorage.setItem('scanCountToday', scanCountToday);
            lastScanTimestamp = new Date().toISOString();
            localStorage.setItem('lastScanTimestamp', lastScanTimestamp);
            updateScanStats();
            
            // Try to find the medication in inventory
            const scannedItem = inventory.find(item => 
                item.name.toLowerCase().includes(medicationName.toLowerCase())
            );
            
            if (scannedItem) {
                currentScannedItem = scannedItem;
                document.getElementById('medication-name').value = scannedItem.name;
                document.getElementById('quantity').max = scannedItem.quantity;
                document.getElementById('quantity').value = Math.min(1, scannedItem.quantity);
                document.getElementById('purpose').value = '';
                document.getElementById('patient-id').value = '';
                nfcModal.classList.add('active');
                
                scannerStatus.textContent = 'Medication Found';
                scannerMessage.textContent = `${scannedItem.name} identified successfully`;
                
                // Show notification
                showNotification(`Found: ${scannedItem.name} (${scannedItem.quantity} units available)`, 'success');
            } else {
                scannerStatus.textContent = 'Medication Not Found';
                scannerMessage.textContent = `${medicationName} not found in inventory`;
                
                // Option to add new medication
                if (confirm(`"${medicationName}" not found in inventory. Would you like to add it?`)) {
                    addNewMedication(medicationName);
                }
            }
        }

        // Add New Medication
        function addNewMedication(name) {
            const category = prompt('Enter medication category:', 'General');
            if (!category) return;
            
            const quantity = parseInt(prompt('Enter quantity:', '50'));
            if (isNaN(quantity)) return;
            
            // Set expiry date to 1 year from now
            const expiryDate = new Date();
            expiryDate.setFullYear(expiryDate.getFullYear() + 1);
            
            const location = prompt('Enter storage location:', 'Section X-1');
            
            const newItem = {
                id: `MED-${Date.now().toString().slice(-6)}`,
                name,
                category,
                quantity,
                expiryDate: formatDate(expiryDate),
                location: location || "Section Unknown"
            };
            
            inventory.push(newItem);
            localStorage.setItem('inventory', JSON.stringify(inventory));
            addLog(currentUser.username, 'Add', `New medication added via NFC scan: ${name}`, name);
            updateDashboard();
            
            showNotification(`${name} has been added to the inventory`, 'success');
        }

        // Confirm Checkout from Modal
        confirmCheckout.addEventListener('click', function() {
            if (currentScannedItem) {
                const quantity = parseInt(document.getElementById('quantity').value);
                const purpose = document.getElementById('purpose').value;
                const patientId = document.getElementById('patient-id').value;
                
                if (quantity > 0 && quantity <= currentScannedItem.quantity) {
                    useItem(currentScannedItem, quantity);
                    
                    // Add scan log
                    const details = `Quantity: ${quantity}${purpose ? ', Purpose: ' + purpose : ''}${patientId ? ', Patient: ' + patientId : ''}`;
                    addLog(currentUser.username, 'NFC Checkout', details, currentScannedItem.name);
                    
                    nfcModal.classList.remove('active');
                    currentScannedItem = null;
                    
                    // Reset scanner
                    stopScanSession();
                } else {
                    showNotification('Please enter a valid quantity', 'warning');
                }
            }
        });

        // Close Modal
        closeModal.addEventListener('click', function() {
            nfcModal.classList.remove('active');
            currentScannedItem = null;
        });

        // Show Notification
        function showNotification(message, type = 'info') {
            // Create notification element
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 16px 24px;
                background: ${type === 'success' ? 'rgba(46, 204, 113, 0.9)' : type === 'warning' ? 'rgba(243, 156, 18, 0.9)' : 'rgba(74, 108, 247, 0.9)'};
                color: white;
                border-radius: var(--radius-md);
                box-shadow: var(--shadow-lg);
                z-index: 10000;
                animation: slideIn 0.3s ease;
                backdrop-filter: blur(10px);
                border: 1px solid ${type === 'success' ? 'rgba(46, 204, 113, 0.3)' : type === 'warning' ? 'rgba(243, 156, 18, 0.3)' : 'rgba(74, 108, 247, 0.3)'};
            `;
            
            notification.innerHTML = `
                <i class="fas fa-${type === 'success' ? 'check-circle' : type === 'warning' ? 'exclamation-triangle' : 'info-circle'}"></i>
                ${message}
            `;
            
            document.body.appendChild(notification);
            
            // Remove notification after 3 seconds
            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease';
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 300);
            }, 3000);
        }

        // Add CSS for notifications
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideIn {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            @keyframes slideOut {
                from { transform: translateX(0); opacity: 1; }
                to { transform: translateX(100%); opacity: 0; }
            }
        `;
        document.head.appendChild(style);

        // AI Chat Functionality
        sendMessageBtn.addEventListener('click', sendMessage);
        userInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                sendMessage();
            }
        });

        function sendMessage() {
            const message = userInput.value.trim();
            if (message) {
                // Add user message
                addMessage(message, 'user');
                userInput.value = '';
                
                // Simulate AI thinking
                const thinkingMsg = document.createElement('div');
                thinkingMsg.className = 'message bot';
                thinkingMsg.innerHTML = '<div class="loader"></div>';
                chatMessages.appendChild(thinkingMsg);
                chatMessages.scrollTop = chatMessages.scrollHeight;
                
                // Simulate AI response after a short delay
                setTimeout(() => {
                    chatMessages.removeChild(thinkingMsg);
                    let response = generateAIResponse(message);
                    addMessage(response, 'bot');
                }, 1000 + Math.random() * 1000);
            }
        }

        function addMessage(text, sender) {
            const messageDiv = document.createElement('div');
            messageDiv.classList.add('message', sender);
            messageDiv.textContent = text;
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function generateAIResponse(message) {
            const lowerMessage = message.toLowerCase();
            
            if (lowerMessage.includes('inventory') || lowerMessage.includes('stock')) {
                const lowStock = inventory.filter(item => item.quantity < 50).length;
                return `Inventory Summary:
• Total items: ${inventory.length}
• Low stock items (<50 units): ${lowStock}
• Items expiring soon: ${inventory.filter(item => getItemStatus(item).class === 'warning').length}
• Expired items: ${inventory.filter(item => getItemStatus(item).class === 'expired').length}

Would you like me to generate a detailed report?`;
            } else if (lowerMessage.includes('expir') || lowerMessage.includes('warn')) {
                const warningItems = inventory.filter(item => getItemStatus(item).class !== 'ok');
                if (warningItems.length > 0) {
                    let response = `⚠️ ${warningItems.length} items need attention:\n`;
                    warningItems.slice(0, 5).forEach(item => {
                        const status = getItemStatus(item);
                        response += `• ${item.name} - ${status.text} (Expires: ${item.expiryDate})\n`;
                    });
                    return response;
                }
                return "All items are within safe expiry dates. No immediate action required.";
            } else if (lowerMessage.includes('hello') || lowerMessage.includes('hi') || lowerMessage.includes('hey')) {
                return "Hello! I'm your JJs AI assistant. I can help you manage inventory, track medications, analyze usage patterns, and generate reports. What would you like to know?";
            } else if (lowerMessage.includes('nfc') || lowerMessage.includes('scan')) {
                return "To use the NFC scanner:\n1. Go to the NFC Scanner page\n2. Click 'Start Scanning'\n3. Hold medication near device\n4. Confirm checkout in the modal\n\nYou can also use the demo buttons to simulate scanning.";
            } else if (lowerMessage.includes('add') || lowerMessage.includes('new')) {
                return "To add new medications:\n1. Use NFC scanner with new items\n2. Manual entry through inventory management\n3. Bulk import via CSV\n\nCurrent system supports automatic identification via NFC tags.";
            } else if (lowerMessage.includes('report') || lowerMessage.includes('analytics')) {
                const totalValue = inventory.reduce((sum, item) => sum + (item.quantity * 10), 0); // Assuming $10 per unit
                return `📊 Inventory Analytics:
• Total items value: $${totalValue.toLocaleString()}
• Average stock level: ${Math.round(inventory.reduce((sum, item) => sum + item.quantity, 0) / inventory.length)} units
• Stock turnover rate: 85%
• Accuracy rating: 92%

Would you like a detailed PDF report?`;
            } else if (lowerMessage.includes('help') || lowerMessage.includes('what can you do')) {
                return "I can help you with:\n📦 Inventory management\n⚠️ Expiry date tracking\n📱 NFC scanning\n📊 Analytics & reports\n🔍 Search medications\n📈 Usage patterns\n💊 Medication information\n\nTry asking about specific medications or system features!";
            } else if (lowerMessage.includes('thank')) {
                return "You're welcome! Let me know if you need anything else.";
            } else {
                // Check if asking about specific medication
                const medMatch = inventory.find(item => 
                    lowerMessage.includes(item.name.toLowerCase().split(' ')[0])
                );
                
                if (medMatch) {
                    const status = getItemStatus(medMatch);
                    return `${medMatch.name} Information:
• Category: ${medMatch.category}
• Current stock: ${medMatch.quantity} units
• Location: ${medMatch.location}
• Expiry: ${medMatch.expiryDate}
• Status: ${status.text}
${status.class !== 'ok' ? '⚠️ This item requires attention!' : '✅ This item is in good condition.'}`;
                }
                
                return "I'm here to help with medical inventory management. You can ask me about:\n• Current stock levels\n• Expiring medications\n• How to use the NFC scanner\n• System analytics\n• Specific medication information\n\nWhat would you like to know?";
            }
        }

        // Initialize the application when the page loads
        document.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>